{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, query, get, set } from \"firebase/database\";\nimport { getAuth, signInWithPopup, GoogleAuthProvider, signOut } from \"firebase/auth\";\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n//get database\nexport const db = getDatabase(app);\n\n//Enable Google Login\nexport const auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider();\nexport const signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const userID = user.uid;\n    const dbref = ref(db, \"users/\" + userID);\n    const userData = await get(query(dbref));\n    console.log(userData);\n    if (!userData.exists()) {\n      await set(ref(db, 'users/' + userID), {\n        name: user.displayName,\n        email: user.email\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n// export const signInWithGoogle = () => {\n//   signInWithPopup(auth, googleProvider).then((res) => {\n//     console.log(res.user)\n//   }).catch((error) => {\n//     console.log(error.message)\n//   })\n// }\n\n//allow signout\nexport const logout = () => {\n  signOut(auth);\n};","map":{"version":3,"names":["initializeApp","getDatabase","ref","query","get","set","getAuth","signInWithPopup","GoogleAuthProvider","signOut","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","app","db","auth","googleProvider","signInWithGoogle","res","user","userID","uid","dbref","userData","console","log","exists","name","displayName","email","err","error","alert","message","logout"],"sources":["/Users/brianhardell/Desktop/UCLA/Third Year/180DB/Team5/edd-app/src/utils/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, query, get, set } from \"firebase/database\";\nimport {getAuth, signInWithPopup, GoogleAuthProvider, signOut} from \"firebase/auth\";\n\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nconst firebaseConfig = {\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID,\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n  };\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n//get database\nexport const db = getDatabase(app);\n\n//Enable Google Login\nexport const auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider();\nexport const signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const userID = user.uid\n    const dbref = ref(db, \"users/\" + userID );\n\n    const userData = await get(query(dbref));\n    console.log(userData)\n    if (!userData.exists()) {\n      await set(ref(db, 'users/' + userID), {\n        name: user.displayName,\n        email: user.email,\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n// export const signInWithGoogle = () => {\n//   signInWithPopup(auth, googleProvider).then((res) => {\n//     console.log(res.user)\n//   }).catch((error) => {\n//     console.log(error.message)\n//   })\n// }\n\n//allow signout\nexport const logout = () => {\n  signOut(auth);\n};\n\n\n"],"mappings":"AAAA;AACA,SAASA,aAAa,QAAQ,cAAc;AAC5C,SAASC,WAAW,EAAEC,GAAG,EAAEC,KAAK,EAAEC,GAAG,EAAEC,GAAG,QAAQ,mBAAmB;AACrE,SAAQC,OAAO,EAAEC,eAAe,EAAEC,kBAAkB,EAAEC,OAAO,QAAO,eAAe;;AAEnF;AACA;;AAEA;AACA;;AAEA,MAAMC,cAAc,GAAG;EACnBC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,0BAA0B;EAC9CC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACG,8BAA8B;EACtDC,WAAW,EAAEL,OAAO,CAACC,GAAG,CAACK,+BAA+B;EACxDC,SAAS,EAAEP,OAAO,CAACC,GAAG,CAACO,6BAA6B;EACpDC,aAAa,EAAET,OAAO,CAACC,GAAG,CAACS,iCAAiC;EAC5DC,iBAAiB,EAAEX,OAAO,CAACC,GAAG,CAACW,sCAAsC;EACrEC,KAAK,EAAEb,OAAO,CAACC,GAAG,CAACa,yBAAyB;EAC5CC,aAAa,EAAEf,OAAO,CAACC,GAAG,CAACe;AAC7B,CAAC;;AAEH;AACA,MAAMC,GAAG,GAAG7B,aAAa,CAACU,cAAc,CAAC;;AAEzC;AACA,OAAO,MAAMoB,EAAE,GAAG7B,WAAW,CAAC4B,GAAG,CAAC;;AAElC;AACA,OAAO,MAAME,IAAI,GAAGzB,OAAO,CAACuB,GAAG,CAAC;AAChC,MAAMG,cAAc,GAAG,IAAIxB,kBAAkB,EAAE;AAC/C,OAAO,MAAMyB,gBAAgB,GAAG,YAAY;EAC1C,IAAI;IACF,MAAMC,GAAG,GAAG,MAAM3B,eAAe,CAACwB,IAAI,EAAEC,cAAc,CAAC;IACvD,MAAMG,IAAI,GAAGD,GAAG,CAACC,IAAI;IACrB,MAAMC,MAAM,GAAGD,IAAI,CAACE,GAAG;IACvB,MAAMC,KAAK,GAAGpC,GAAG,CAAC4B,EAAE,EAAE,QAAQ,GAAGM,MAAM,CAAE;IAEzC,MAAMG,QAAQ,GAAG,MAAMnC,GAAG,CAACD,KAAK,CAACmC,KAAK,CAAC,CAAC;IACxCE,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACrB,IAAI,CAACA,QAAQ,CAACG,MAAM,EAAE,EAAE;MACtB,MAAMrC,GAAG,CAACH,GAAG,CAAC4B,EAAE,EAAE,QAAQ,GAAGM,MAAM,CAAC,EAAE;QACpCO,IAAI,EAAER,IAAI,CAACS,WAAW;QACtBC,KAAK,EAAEV,IAAI,CAACU;MACd,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZN,OAAO,CAACO,KAAK,CAACD,GAAG,CAAC;IAClBE,KAAK,CAACF,GAAG,CAACG,OAAO,CAAC;EACpB;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,MAAMC,MAAM,GAAG,MAAM;EAC1BzC,OAAO,CAACsB,IAAI,CAAC;AACf,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}